<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tin Học Thật Là Đơn Giản - AWS Cloud</title>
    <link rel="stylesheet" href="https://quangtrung96.github.io/AWS/css/bootstrap.min.css" type="text/css">
</head>
<body>
    <div class="container-fluid mt-3">
        <div class="text-center text-danger">
            <h1>AWS Cloud Tiếng Việt</h1>
            <h1>Bài 4: Tạo user/group và phân quyền file và folder trên AWS EC2 Linux</h1>
        </div>
        <div class="text-left mt-5">
            <p>Bài này cũng rất là quan trọng, bởi vì bạn phải nắm được cách phân quền File và Folder</p>
            <p>Ví dụ như sau này bạn tạo một Web Server, nếu như bạn không biết phân quyền File và Folder thì bạn sẽ rất dễ có thể bị hacker tấn công</p>
            <p>Hoặc là những thư mục dữ liệu của mình bạn không biết phân quyền thì cũng sẽ bị kẻ xấu đột nhập vào các thư mục đó và ăn cắp dữ liệu của bạn</p>
            <p>Okie để bắt đầu, thì đầu tiên chúng ta sẽ truy cập vào Server, thì chúng ta sẽ đi từng bước 1</p>
            <p>Bước đầu tiền chúng ta sẽ vào Server</p>
        </div>
        <div class="mt-5">
            <ul>
                <li>pwd</li>
                <li>ll -a /home/</li>
                <li>cd /home/ec2-user/</li>
                <li>cd /root/</li>
                <li>sudo su -</li>
                <li>&nbsp;</li>
                <li>useradd trung</li>
                <li>passwd trung</li>
                <li>userdel trung</li>
                <li>rm -rf /home/trung/</li>
                <li>userdel -r trung</li>
                <li>userdel trung</li>
                <li>ll -a /home/</li>
                <li>vi /etc/ssh/sshd_config</li>
                <li>/password != /Password</li>
                <li>systemctl status sshd === service sshd status</li>
                <li>systemctl restart sshd === service sshd restart</li>
                <li>passwd ec2-user</li>
                <li>.pem || password</li>
                <li>passwd === passwd root</li>
                <li>[mit@ip-172-31-3-96 ~]$ pwd<br />
                    /home/mit<br />
                    [mit@ip-172-31-3-96 ~]$ sudo su -<br />
                    [sudo] password for mit:<br />
                    mit is not in the sudoers file.<br />
                    [mit@ip-172-31-3-96 ~]$<br />
                </li>
            </ul>
            <hr />
            <p>
                /root === /home/ec2-user === /home/trung === /home/truong
            </p>
            <p>
                $ ssh -i "hello.pem" soc@ec2-54-179-111-240.ap-southeast-1.compute.amazonaws.com<br />
                soc@ec2-54-179-111-240.ap-southeast-1.compute.amazonaws.com: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).
            </p>
            <p class="text-danger">Custom IP</p>
            <p>
                ssh ec2-user@ec2-54-179-111-240.ap-southeast-1.compute.amazonaws.com
            </p>
            <p>
                <img src="./images/network_security_1.png" alt="">
            </p>
            <p>
                <img src="./images/network_security_2.png" alt="">
            </p>
            <p>
                <img src="./images/network_security_3.png" alt="">
            </p>
            <p>
                <img src="./images/network_security_4.png" alt="">
            </p>
            <p>
                <img src="./images/network_security_5.png" alt="">
            </p>
            <hr />
            <p>
                chmod 400 tho.pem
            </p>
            <p>
                chmod 700 .ssh (rwx------)
            </p>
            <p>
                chmod 755 folder name (rwxr-xr-x)
            </p>
            <p class="text-danger">Switch User, change ec2-user default</p>
            <p>
                <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/managing-users.html" target="_blank">Manage users on your Linux instance</a><br />
                <a href="https://www.lightnetics.com/topic/421/how-to-change-the-default-aws-instance-user" target="_blank">How to change the default aws instance user?</a>
                <ul>
                    <li>ssh-keygen -y -f /path_to_key_pair/key-pair-name.pem</li>
                    <li>sudo adduser newuser</li>
                    <li>sudo su - newuser</li>
                    <li>mkdir .ssh</li>
                    <li>chmod 700 .ssh</li>
                    <li>touch .ssh/authorized_keys</li>
                    <li>chmod 600 .ssh/authorized_keys</li>
                    <li>nano .ssh/authorized_keys</li>
                    <li>sudo vi /etc/sudoers.d/90-cloud-init-users</li>
                    <li>sudo userdel -r ec2-user</li>
                </ul>
            </p>
        </div>
    </div>
</body>
</html>